#+TITLE: ob-deno

Babel Functions for Javascript/TypeScript with Deno.

ob-deno is based on ob-js.
(However, there is no session support.)

* Requirements

- [[https://deno.land/][Deno]]
- [Optional] [[https://github.com/emacs-typescript/typescript.el][typescript.el]]

* Setup

#+begin_src emacs-lisp :results none
  (require 'ob-deno)

  (add-to-list 'org-babel-load-languages '(deno . t))
  (org-babel-do-load-languages 'org-babel-load-languages org-babel-load-languages)

  ;; optional (required the typescript.el)
  (add-to-list 'org-src-lang-modes '("deno" . typescript))
#+end_src

* Usage

#+begin_example
  ,#+begin_src deno
  const arr = [1, 2, 3];
  return arr;
  ,#+end_src

  ,#+RESULTS:
  | 1 | 2 | 3 |
#+end_example

#+begin_example
  ,#+begin_src deno :results output
  const arr = [1, 2, 3];
  console.log(arr);
  ,#+end_src

  ,#+RESULTS:
  : [ 1, 2, 3 ]
#+end_example

#+begin_example
  ,#+begin_src deno :var foo="bar" baz='("qux")
  return {foo, baz};
  ,#+end_src

  ,#+RESULTS:
  : { foo: "bar", baz: [ "qux" ] }
#+end_example

#+begin_example
  ,#+begin_src deno :results output :cmd deno run --allow-net
    const response = await fetch("https://httpbin.org/get?hello=world");
    const json = await response.json();

    console.log(json.args);
  ,#+end_src

  ,#+RESULTS:
  : { hello: "world" }
#+end_example

* TO DO

** TODO add configuration for the variable prefix (the choices are ~var~, ~let~, ~const~)
** TODO add dedicated options for permission control (e.g. ~--allow-net~, ~--allow-env~, etc)
** TODO add dedicated options for subcommands
